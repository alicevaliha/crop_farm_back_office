{"ast":null,"code":"import React,{useState}from\"react\";import\"./index.css\";import Input from\"../elements/input/Input.js\";import BtnprimaryComponent from\"../elements/button/BtnPrimary.js\";import axios from'axios';// Importez axios pour effectuer des appels API\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const LoginForm=_ref=>{let{objname}=_ref;const[email,setEmail]=useState(\"\");// état pour l'e-mail\nconst[password,setPassword]=useState(\"\");// état pour le mot de passe\nconst handleEmailChange=e=>{setEmail(e.target.value);// Met à jour l'état de l'e-mail lorsque l'utilisateur tape dans le champ d'entrée\n};const handlePasswordChange=e=>{setPassword(e.target.value);// Met à jour l'état du mot de passe lorsque l'utilisateur tape dans le champ d'entrée\n};const handleSubmit=async e=>{e.preventDefault();// Empêche le rechargement de la page lors de la soumission du formulaire\n// Vous pouvez maintenant utiliser 'email' et 'password' pour effectuer des opérations, telles que des appels API avec Axios\nconsole.log(\"Email:\",email);console.log(\"Password:\",password);// Exemple d'appel API avec Axios\ntry{// Appel de l'API pour se connecter avec l'email et le mot de passe\nconst response=await axios.get(\"https://cropfarmback-production.up.railway.app/proprietaires/login\",{params:{mail:email,mdp:password}});// Gérer la réponse de l'API\nconsole.log(\"Réponse de l'API :\",response.data);const userId=response.data.id;const username=response.data.nom;const usermail=response.data.mail;// Stocker des données dans le localStorage\nlocalStorage.setItem('userId',userId);localStorage.setItem('username',username);localStorage.setItem('usermail',usermail);window.location.href=\"/dashboard\";// Rediriger vers le tableau de bord ou effectuer d'autres actions en fonction de la réponse\n}catch(error){// Gérer les erreurs d'authentification\nalert(\"Erreur lors de la connexion veuillez réessayer ^^\");console.log(error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"float-bloc-list login-bloc\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"greet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"Connectez vous \\xE0 votre compte \",objname]}),/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:\"Soyez inspir\\xE9s donnez nous un nom!\"})]}),/*#__PURE__*/_jsx(Input,{name:\"email\",type:\"email\",placeholder:\"Votre e-mail soit jean@gmail.com / alicia@gmail.com\",value:email,onChange:handleEmailChange}),/*#__PURE__*/_jsx(Input,{name:\"password\",type:\"password\",placeholder:\"Votre mot de passe soit donc mdpjean / mdpalicia\",value:password,onChange:handlePasswordChange}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(BtnprimaryComponent,{holder:\"Se connecter\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"coverbottom\"})]})});};export default LoginForm;","map":{"version":3,"names":["React","useState","Input","BtnprimaryComponent","axios","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","LoginForm","_ref","objname","email","setEmail","password","setPassword","handleEmailChange","e","target","value","handlePasswordChange","handleSubmit","preventDefault","console","log","response","get","params","mail","mdp","data","userId","id","username","nom","usermail","localStorage","setItem","window","location","href","error","alert","children","className","name","type","placeholder","onChange","onSubmit","holder"],"sources":["/Users/macbook/Documents/git clones/crop_farm_back_office/src/component/form/LoginForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./index.css\"; \nimport Input from \"../elements/input/Input.js\";\nimport BtnprimaryComponent from \"../elements/button/BtnPrimary.js\";\nimport axios from 'axios'; // Importez axios pour effectuer des appels API\n\nconst LoginForm = ({ objname }) => {\n  const [email, setEmail] = useState(\"\"); // état pour l'e-mail\n  const [password, setPassword] = useState(\"\"); // état pour le mot de passe\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value); // Met à jour l'état de l'e-mail lorsque l'utilisateur tape dans le champ d'entrée\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value); // Met à jour l'état du mot de passe lorsque l'utilisateur tape dans le champ d'entrée\n  };\n\n  const handleSubmit = async (e) => {\n\n      e.preventDefault(); // Empêche le rechargement de la page lors de la soumission du formulaire\n    \n      // Vous pouvez maintenant utiliser 'email' et 'password' pour effectuer des opérations, telles que des appels API avec Axios\n      console.log(\"Email:\", email);\n      console.log(\"Password:\", password);\n    \n      // Exemple d'appel API avec Axios\n      try {\n        // Appel de l'API pour se connecter avec l'email et le mot de passe\n        const response = await axios.get(\"https://cropfarmback-production.up.railway.app/proprietaires/login\", {\n          params: {\n            mail: email,\n            mdp: password,\n          },\n        });\n    \n        // Gérer la réponse de l'API\n        console.log(\"Réponse de l'API :\", response.data);\n        const userId = response.data.id;\n        const username = response.data.nom;\n        const usermail = response.data.mail;\n\n        // Stocker des données dans le localStorage\n        localStorage.setItem('userId', userId);\n        localStorage.setItem('username',username);\n        localStorage.setItem('usermail',usermail);\n\n        window.location.href = \"/dashboard\";\n        // Rediriger vers le tableau de bord ou effectuer d'autres actions en fonction de la réponse\n      } catch (error) {\n        // Gérer les erreurs d'authentification\n          alert(\"Erreur lors de la connexion veuillez réessayer ^^\");\n          console.log(error);\n      }\n\n};\n  \n  return (\n    <>\n      <div className=\"float-bloc-list login-bloc\">\n        <div className=\"greet\">\n          <div className=\"title\">Connectez vous à votre compte {objname}</div>\n          <div className=\"subtitle\">Soyez inspirés donnez nous un nom!</div>\n        </div>\n        {/* Champ d'entrée pour l'e-mail */}\n        <Input name=\"email\" type=\"email\" placeholder=\"Votre e-mail soit jean@gmail.com / alicia@gmail.com\" value={email} onChange={handleEmailChange} />\n        {/* Champ d'entrée pour le mot de passe */}\n        <Input name=\"password\" type=\"password\" placeholder=\"Votre mot de passe soit donc mdpjean / mdpalicia\" value={password} onChange={handlePasswordChange} />\n        <form onSubmit={handleSubmit}>\n          {/* Bouton de soumission du formulaire */}\n          <BtnprimaryComponent holder=\"Se connecter\" />\n        </form>\n        <div className=\"coverbottom\"></div>\n      </div>\n\n    </>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}