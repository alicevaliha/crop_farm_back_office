{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";// Importez axios ici\nimport\"./index.css\";// Importez votre fichier CSS\nimport Input from\"../elements/input/Input.js\";import BtnprimaryComponent from\"../elements/button/BtnPrimary.js\";import{redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Form=_ref=>{let{type,toupdate,id,paramname,valuetype,path,redirection}=_ref;const[updatedvalue,setUpdatedValue]=useState(\"\");// état pour l'objet\nconst handleUpdatedValueChange=e=>{setUpdatedValue(e.target.value);// Met à jour l'état de la valeur lors de la saisie\n};const handleSubmit=async e=>{e.preventDefault();// Empêche le rechargement de la page lors de la soumission du formulaire\nlet convertedValue=updatedvalue;// Vérifier le type et convertir la valeur en conséquence\nif(valuetype===\"int\"){convertedValue=parseInt(updatedvalue);}else if(valuetype===\"float\"){convertedValue=parseFloat(updatedvalue);}let request=\"https://cropfarmback-production.up.railway.app\";request+=path;request+=\"/\";request+=id;let redirect=redirection;redirect+=id;try{const response=await axios.put(request,{[paramname]:convertedValue});console.log(\"Réponse de l'API :\",response.data);window.location.href=redirect;}catch(error){console.error(\"Erreur lors de la requête :\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"float-bloc-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"greet\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",value:id,name:\"id\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"Modifier \",toupdate]}),/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:\"Modifier...modifier...modifier...\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:type,placeholder:toupdate,value:updatedvalue,onChange:handleUpdatedValueChange}),/*#__PURE__*/_jsx(BtnprimaryComponent,{holder:\"Modifier\",type:\"submit\"})]})]});};export default Form;","map":{"version":3,"names":["React","useState","axios","Input","BtnprimaryComponent","redirect","jsx","_jsx","jsxs","_jsxs","Form","_ref","type","toupdate","id","paramname","valuetype","path","redirection","updatedvalue","setUpdatedValue","handleUpdatedValueChange","e","target","value","handleSubmit","preventDefault","convertedValue","parseInt","parseFloat","request","response","put","console","log","data","window","location","href","error","className","children","name","onSubmit","placeholder","onChange","holder"],"sources":["/Users/macbook/Documents/git clones/crop_farm_back_office/src/component/form/UpdatingForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\"; // Importez axios ici\nimport \"./index.css\"; // Importez votre fichier CSS\nimport Input from \"../elements/input/Input.js\";\nimport BtnprimaryComponent from \"../elements/button/BtnPrimary.js\";\nimport { redirect } from \"react-router-dom\";\n\nconst Form = ({ type, toupdate, id, paramname , valuetype ,path,redirection}) => {\n  const [updatedvalue, setUpdatedValue] = useState(\"\"); // état pour l'objet\n\n  const handleUpdatedValueChange = (e) => {\n    setUpdatedValue(e.target.value); // Met à jour l'état de la valeur lors de la saisie\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault(); // Empêche le rechargement de la page lors de la soumission du formulaire\n\n    let convertedValue = updatedvalue;\n\n    // Vérifier le type et convertir la valeur en conséquence\n    if (valuetype === \"int\") {\n      convertedValue = parseInt(updatedvalue);\n    } else if (valuetype === \"float\") {\n      convertedValue = parseFloat(updatedvalue);\n    }\n\n    let request = \"https://cropfarmback-production.up.railway.app\";\n    request+=path;\n    request+=\"/\";\n    request+=id;\n\n    let redirect=redirection;\n    redirect+=id;\n\n    try {\n      const response = await axios.put(request, {\n        [paramname]: convertedValue,\n      });  \n\n      console.log(\"Réponse de l'API :\", response.data);\n      window.location.href = redirect;\n    } catch (error) {\n      console.error(\"Erreur lors de la requête :\", error);\n    }\n  };\n\n  return (\n    <div className=\"float-bloc-list\">\n      <div className=\"greet\">\n        <input type=\"hidden\" value={id} name=\"id\" />\n        <div className=\"title\">Modifier {toupdate}</div>\n        <div className=\"subtitle\">Modifier...modifier...modifier...</div>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <Input\n          type={type}\n          placeholder={toupdate}\n          value={updatedvalue}\n          onChange={handleUpdatedValueChange}\n        />\n        <BtnprimaryComponent holder=\"Modifier\" type=\"submit\" />\n      </form>\n    </div>\n  );\n};\n\nexport default Form;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAE;AAC3B,MAAO,aAAa,CAAE;AACtB,MAAO,CAAAC,KAAK,KAAM,4BAA4B,CAC9C,MAAO,CAAAC,mBAAmB,KAAM,kCAAkC,CAClE,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5C,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAoE,IAAnE,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,EAAE,CAAEC,SAAS,CAAGC,SAAS,CAAEC,IAAI,CAACC,WAAW,CAAC,CAAAP,IAAA,CAC1E,KAAM,CAACQ,YAAY,CAAEC,eAAe,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAEtD,KAAM,CAAAoB,wBAAwB,CAAIC,CAAC,EAAK,CACtCF,eAAe,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAE;AACnC,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAH,CAAC,EAAK,CAChCA,CAAC,CAACI,cAAc,CAAC,CAAC,CAAE;AAEpB,GAAI,CAAAC,cAAc,CAAGR,YAAY,CAEjC;AACA,GAAIH,SAAS,GAAK,KAAK,CAAE,CACvBW,cAAc,CAAGC,QAAQ,CAACT,YAAY,CAAC,CACzC,CAAC,IAAM,IAAIH,SAAS,GAAK,OAAO,CAAE,CAChCW,cAAc,CAAGE,UAAU,CAACV,YAAY,CAAC,CAC3C,CAEA,GAAI,CAAAW,OAAO,CAAG,gDAAgD,CAC9DA,OAAO,EAAEb,IAAI,CACba,OAAO,EAAE,GAAG,CACZA,OAAO,EAAEhB,EAAE,CAEX,GAAI,CAAAT,QAAQ,CAACa,WAAW,CACxBb,QAAQ,EAAES,EAAE,CAEZ,GAAI,CACF,KAAM,CAAAiB,QAAQ,CAAG,KAAM,CAAA7B,KAAK,CAAC8B,GAAG,CAACF,OAAO,CAAE,CACxC,CAACf,SAAS,EAAGY,cACf,CAAC,CAAC,CAEFM,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEH,QAAQ,CAACI,IAAI,CAAC,CAChDC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGjC,QAAQ,CACjC,CAAE,MAAOkC,KAAK,CAAE,CACdN,OAAO,CAACM,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAED,mBACE9B,KAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhC,KAAA,QAAK+B,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBlC,IAAA,UAAOK,IAAI,CAAC,QAAQ,CAACY,KAAK,CAAEV,EAAG,CAAC4B,IAAI,CAAC,IAAI,CAAE,CAAC,cAC5CjC,KAAA,QAAK+B,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAC,WAAS,CAAC5B,QAAQ,EAAM,CAAC,cAChDN,IAAA,QAAKiC,SAAS,CAAC,UAAU,CAAAC,QAAA,CAAC,mCAAiC,CAAK,CAAC,EAC9D,CAAC,cACNhC,KAAA,SAAMkC,QAAQ,CAAElB,YAAa,CAAAgB,QAAA,eAC3BlC,IAAA,CAACJ,KAAK,EACJS,IAAI,CAAEA,IAAK,CACXgC,WAAW,CAAE/B,QAAS,CACtBW,KAAK,CAAEL,YAAa,CACpB0B,QAAQ,CAAExB,wBAAyB,CACpC,CAAC,cACFd,IAAA,CAACH,mBAAmB,EAAC0C,MAAM,CAAC,UAAU,CAAClC,IAAI,CAAC,QAAQ,CAAE,CAAC,EACnD,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAF,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}